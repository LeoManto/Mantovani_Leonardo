<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <!--
<link rel="stylesheet" type="text/css" href="../css/issStyle1.css">
<script type="text/javascript" src="../css/issStyle.js"></script>
-->
<style type="text/css">
body
{
    margin-left:  30px;
    margin-right: 30px;
};

P
{
    font-family: Tahoma;
    font-size: 10pt;
};

a, a:visited, a:active, a:link, a:hover {
    text-decoration: underline;
    color: #545454;
    background-color: transparent;
	font-size: 93%;
}

a:hover {
    background-color: #cccccc;
}


hr {
    clear: both;
    height: 1px;
    color: #242424;
    background-color: transparent;
}

h1, h2, h3 {
    color: #242424;
    clear: left;
    font: 100% Tahoma, Helvetica, Arial, sans-serif;
    margin-bottom: 0.5em;
    padding-top: 0.5em;
	border-radius: 10px;
	padding: 5px;
}

top {
	width: 100%;
}


#i {
    color: #ff1010;
}
tt{
	font-family: "Arial";
    font-size: 90%;
	color: #006600;
}
em{
	font-family: "Arial";
    font-size: 80%;
	font-weight: bold;
	border-style:solid;
	border-color: #abe876;
    color: #1632cc;
}
bc{
	font-family: "Arial";
	font-size: 90%;
	font-weight: bold;
    color: #990000;
	background-color: #fcf8c7;
}
ks{
	font-family: "Arial";
	font-weight: bold;
    color: #0000CD	;
	font-size: 90%;
}
kc{
	font-family: "Arial";
	font-weight: bold;
    color: #008000	;
	font-size: 90%;
}
pre{
	font-family: "Consolas";
	font-size: 85%;
	background-color: #f5f5f5;
	border: 1.5px solid silver;
	padding: 5px;
}
m{
	font-family: "Helvetica";
	line-height: 100%;
 	font-size: 75%;
}
div.body{
	 
    font-size: 18px;
}
k{
    color: #990000;
	font-weight: bold;
	font-size: 90%;
}
h1 {
    font-size: 150%;
    background-color: #b2c0ff;
	padding: 10px;
}

h2 {
    background-color: #9ed8ff;
    font-size: 130%;
}

h3 {
	background-color: #e6ccff;
    font-size: 100%;
}
h4 {
    background-color: #ccffcc;
    font-size: 100%;
	width: 95%;
	border-radius: 5px;
	padding: 2px;
}
h5 {
    background-color: #d5ffb0;
    font-size: 100%;

}
div.req{
	background-color: #d9ffb3;
    font-size: 18px;
	width: 700px;
    border: 3px solid green;
    padding: 15px;
    margin: 10px;
}
div.remark{
	background-color: #E3F2FD;
    border: 1.5px solid #d5f2ed;
    padding: 15px;
    margin: 10px;
	border-radius: 25px;
}
table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
}

ol, ul, li {
  margin: 0;
  margin-left: 10px;
  padding: 0;
  padding-bottom: 5px;
}

table, th, td {
	border: 1px solid black;
}

img {
	border: 1.5px solid #d5f2ed

}

a, a:visited, a:active, a:link, a:hover {
    text-decoration: underline;
    color: #545454;
    background-color: transparent;
}

div.wrapdesc{
	width: 90%;
	margin: auto;
}

div.imagedesc{
	width: 85%;
	margin: auto;
}
</style>
    
<head>
   
<title>CautiousExplorerActors</title></head>
    
<body>
<div id="top">
<h1>Lab ISS | the project cautiousExplorer with Actors<font size="5"></font> </h1>
</div>  

<div class="body"> 
<h2>Introduction</h2>
This case-study deals with the design and development of proactive/reactive software systems 
based on the concept of Actor, as introduced in 
<a href="../../it.unibo.supports/userDocs/wssupportAsActorJava.html" target="web">
LabIss2021 | wshttp support with ActorBasicJava observers</a>.
 
<h2>Requirements</h2>

 
<div class="remark">
Design and build a software system that allow the robot described in 
<a href="https://htmlpreview.github.io/?https://github.com/anatali/issLab2021/blob/master/it.unibo.virtualRobot2020/userDocs/VirtualRobot2021.html" target="lab"><em>VirtualRobot2021.html</em></a>
 to exibit the following behaviour:
<ul>
<li>the robot lives in a rectangular room, delimited by walls that includes one or more devices (e.g. sonar) able to detect the presence
of obstacles, including the robot itself;</li>
<li>the robot has a <ks>den</ks> for refuge, located in the position shown in the picture
<center><img src="./img/cautiousExplorer.png" alt="cautiousExplorer" width="20%" ></center></li>
<li>the robot works as an <i>explorer of the room</i>. Starting from its <ks>den</ks>,  the goal of the robot is to
create a map of the room that records the position of the fixed obstacles. 
The presence of mobile obstacles in the room is (at the moment) excluded;</li>
<li>since the robot is <i>'cautious'</i>,  it  returns immediately to the <ks>den</ks> as soon as it finds an obstacle.
It also stops for a while (e.g. 2 seconds), when it 'feels' that the sonar has detected its presence.
</li>
 
</ul>
</div>

 <h3>Delivery</h3>
The customer requires to receive at <k>12 noon on April 6</k> a file named 
<pre>
cognome_nome_cea.pdf
</pre>
including a (synthetic) description of the project  (preceded by a proper analysis of the problem)
based on components of type <a href="../../it.unibo.supports/userDocs/wssupportAsActorJava.html" target="web">ActorBasicJava</a>
and a reference to a <i>first working prototype</i> (even with limited capabilities) of the system. 
 
 <h3>Meeting</h3>
 A SPRINT-review phase with the customer is planned (via Teams) at <k>5.15 pm on April 6</k>.

            <h2>Requirement analysis</h2>
            <p>After interviewing client, menanig he associates whith nouns have been clarified:</p> 
            <ul>
                <li><ks>rectangular room</ks>: sa room delimited by walls with rectangular shape , the robot can't go out from this room.</li>
                <li><ks>den</ks>: a place where the robot is initially positioned. Is a fixed place, and it's located in the upper left corner of room.</li>
                <li><ks>obstacles</ks>: any object that cause a collision with if robot hits it. Their position are fixed since start of the work.</li>
                <li><ks>cautious explorer</ks>: robot's behaviour is like a cautious explorer, if he hit any kind of obstacle, he come back to initial position that is <ks>den</ks>.</li>
                <li><ks>map</ks>: the robot needs to remember all space that he have already explored and obstacles he find in his exploration.</li>
                <li><ks>sonar</ks>: is a system that acts on entire line where he is positioned and facing. In case the robot enter in sonar zone, he detect it, wait for some seconds and come back to den.</li>
            </ul>
            <p>Regarding to actions (verbs):</p>
            <ul>
                <li><ks>moves</ks>: robot can moves aroud the closed environment using all four principal dirctions.</li>
                <li><ks>find an obstacle</ks>: when the robot collides with an obstacle.</li>
            </ul>

            <h3>A first <a href="https://en.wikipedia.org/wiki/User_story" target="web">user story</a></h3>
            <table style="width:98%">
                <tbody>
                    <tr>
                        <td style="width:60%">

                            At the start of the work, den can be positioned near one of walls. Once work is started robot can moves in any position he want.
                            All moves he performs are remembered so that is created a <ks>'mental map'</ks> of the environment in where he is. When, after a move, robot hit one of obstacles
                            in environment, he registers its position in his environment 'mental map' and he comes back to the den.    
                            <p>User can't stop activity execution: system terminate independently after the completion of activity.</p>
                            <p>Application can be runned more time to build environment map. It is not necessary to complete map in one run.</p>
                            
                            <p>In images is reported only an example of a possible path that robot can performs in one of his 'cautious' exploration.</p>
                        </td>
                        <td>
                            <center><img src="./img/TestPlan0.png" alt="TestPlan0" width="100%"></center>
                        </td>
                        <td> 
                            <center><img src="./img/TestPlan1.png" alt="TestPlan1" width="100%"></center>
                        </td>
                    </tr>
                </tbody>
            </table>
            <h3>A second <a href="https://en.wikipedia.org/wiki/User_story" target="web">user story</a></h3>
            <table style="width:98%">
                <tbody>
                    <tr>
                        <td style="width:60%">

                            Unlike the previous User Story, in this User Story, robot doesn't collide with an obstacle. We want to describe the case in which the robot go forward until, at a certain point,
                            he detects the sonar signal. In the same way of previous example, robot as soon as detects this particoular signal he takes same behaviour and immediatly return to the den. 
                            
                            <p>In images is reported only an example of a possible path that robot can performs in one of his 'cautious' exploration in case which detects the sonar.</p>
                        </td>
                        <td>
                            <center><img src="./img/TestPlan0.png" alt="TestPlan0" width="100%"></center>
                        </td>
                        <td> 
                            <center><img src="./img/TestPlan1.png" alt="TestPlan1" width="100%"></center>
                        </td>
                    </tr>
                </tbody>
            </table>

            <h4>Verification of expected results (Test plans)</h4>

            <table style="width:98%">
                <tbody>
                    <tr>
                        <td style="width:50%">
                            It is necessary to verify that expected behavior for robot is respected, and at the end of execution positions of obstacles have been found.
                        </td>
                        <td>
                            <div class="remark">
                                Verification of correctness of robot's behavior and final environment map, it must be carried out by software, without an
                                human user's interaction
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>

            <h2>Problem analysis</h2>



            <h3>Aspects noted</h3>
            <p>
                <ol>
                    <li>
                        It's about realizing a <k>distributed system</k> composed by two macro-component:
                        <ul>
                            <li>robot (virtual) provided by committent</li>
                            <li>Our application (<ks>cautiousExplorerActors</ks>) that send correct commands to robot so as to satisfy requirements</li>
                        </ul>
                    </li>
                    <li>
                        The robot can be moved by network in two different ways, like described in <a href="./VirtualRobot2021.html #commands">VirtualRobot2021.html</a> <ks>command</ks> section:
                        <ul>
                            <li>Sending messages to port <tt>8090</tt> with HTTP POST protocol</li>
                            <li>sending messages to port <tt>8091</tt> with websocket technology</li>
                        </ul>
                    </li>
                    <li>
                        As described in requisites, it is strongly recommended to make a map (planimetry) of the environment in where the robot performs his exploration.
                    </li>
                    <li>
                        We have to hadle the reactive component of the robot in case we want to implement sonar in our application.
                    </li>
                    <li>
                        For robot exploration, we can decide to adopt a <k>Random</k> or a <k>Strategy</k>.   
                    </li>
                    <li>
                        As there are a lot of library in a moltitude of programming languages that permit sending of these commands, it's not identified any significative <ks>abstraction-gap</ks> on operation plan.
                        <div class="remark">
                            However, the problem does introduce an <k>abstraction gap at the conceptual level</k>,
                            since <kc>the required logical interaction</kc> is always a <em>request-response</em>, <b>regardless of the technology</b> used to implement
                            the interaction with the robot.
                        </div>
                    </li>
                    
                </ol>
            </p>
            

            <h3>Logical Architecture</h3>
                <table style="width:98%">
                    <tbody>	
                        <tr>
                            <td style="width:50%">
                                We do introduce the following terminology:<br/><br/>
                                <ul>
                                    <li><bc>Dispatch</bc>: a message '<i>fire and forget</i>': the sender does not expect any answer.</li>
                                    <li><bc>Request</bc>: the sender expects an answer sent using a <bc>Reply</bc>.</li>
                                    <li><bc>Invitation</bc>: the sender expects an <tt>ack</tt>.</li>
                                    <li><bc>Event</bc>: the sender '<i>emits information</i>' without specifying any receiver. <!--(<tt>RECEIVER=none</tt>)--> </li>
                                </ul>
                            </td>
                            <td>
                            <center><img src="./img/issMsgSymbols.png" alt="issMsgSymbols" width="40%" ></center>      
                            </td>
                        </tr>
                        <tr>
                            <td style="width:60%">
                                We must design and build a <k>distributed system</k> with two software macro-components:
                                    <ol>
                                        <li>the <a href="VirtualRobot2021.html" target="web"><ks>VirtualRobot</ks></a>, given by the customer</li>
                                        <li>our <ks>cautiousExplorerActors</ks> application that interacts with the robot with a <i>HTTP POST protocol</i> or <i>websocket technology</i>.</li>
                                        <ul>
                                            <li>
                                                With HTTP POST protocol we have consequently a request-receive interaction, however in our case we don't need to hadle the reply that robot send us.
                                                Considering that application doesn't necessarily have to handle reply sended us, we can build a system that use a <k>dispatch</k> pattern. In this way the execution
                                                continue without blocking until the end.
                                            </li>
                                            <li>
                                                Usind instead <i>websocket technology</i> it does not have this type of problem.
                                            </li>
                                        </ul>
                                    </ol>
                                A first scheme of the logical architecture  of the systems can be defined as shown in the figure
                                (for the meaning of the symbols, see the <a href="./img/legenda.png" target="web">legenda</a>)
                            
                            </td>
                            <td>  
                                <center><img src="./img/logicArch0.png" alt="logicArch0" width="100%" ></center>
                            </td>
                        </tr>
                        <tr>
                            <td style="width:60%">
                               
                                In fact we can already say that CautiosExplorer is not a generic entity but it is an actor, because receives information by the WEnv to generate a service.
                                For this reason the Logical Architecture can be represented like this.
                            </td>
                            <td>  
                                <center><img src="./img/logicArch1.png" alt="logicArch0" width="100%" ></center>
                            </td>
                        </tr>
                        
                        
                    </tbody>
                </table>

                <p>There are many point on with we can do some observation:</p>
                <ul>
                    <li>
                        To make our <em>cautiousExplorerActors</em> software <k>as much as possible indipendent</k> from the underlying communication protocols, the 
                        designer could make reference to proper <a href="https://it.wikipedia.org/wiki/Design_pattern" target="web"><em>design pattern</em></a>,
                        e.g.
                        <a href="https://it.wikipedia.org/wiki/Adapter_pattern" target="web"><ks>Adapter</ks></a>, 
                        <a href="https://it.wikipedia.org/wiki/Bridge_pattern" target="web"><ks>Bridge</ks></a>,
                        <a href="https://it.wikipedia.org/wiki/Fa%C3%A7ade_pattern" target="web"><ks>Facade</ks></a>.
                    </li>
                    <li>
                        The project reuse the <a href="../../it.unibo.resumableBoundaryWalker/"><k>ResumableBoundaryWalker</k></a> project for everything related to the communication system.
                    </li>
                    <li>
                        For our project we already have a support library to <k>Actors</k> programming <a href="../../unibolibs/IssWsHttpJavaSupport.jar">IssWsHttpJavaSupport</a>. Java doesn't offer a proprietary system to <k>Actors</k> programming.
                    </li>
                    <li>
                        We can say that our software is an application and <g>not a database or a function or an object</g>. In any case exact 'nature' of this software is left to designer.
                    </li>
                    <li>
                        It's easy to describe what the robot has to do to meet requirements
<pre>
Let us define <kc>emum direction {UP,DOWN,LEFT,RIGHT}. Those are moves that robot can do.</kc>.
The robot start in the DEN position, that it could be different every time user run application.
    1) send to the robot request to start exploration of room and continue to do it, until he collide with a wall or an obstacle. Path that he perform until collision,
     could be totally random or somehow handled.
    2) After collision or sonar detection, the robot re-do in reverse same moves that he have performed previously, so that he return immediately to the den.
    3) On every run of application robot 'remember' moves he do until a collision, so that he build a 'mental-map' of the environment.
</pre>
                    </li>
                    <li>
                        It has been decided that, to facilitate the robot exploration, it will assume a strategy logic. This because, in case of a random locig, it would be more difficult to 
                        keeping trak of robot moves and update the state of the map, in addition to the fact that exploration would not be efficient. Instead with a strategy logic we can a priori smartly build
                        the exploration moves.
                    </li>
                </ul>


            <h3>Exploration Strategy</h3>
            <!--TODO exploration strategy-->
            <h3>Robot "Cautious" behaviour</h3>
            <!--TODO analisis of "cautious" behaviour-->

            <h2>Test plans</h2> 
                To check that application fulfills requirements, it's necessary to keep track of the moves done by the robot until a 
                collision and verify that robot follow same path to return to the den.
                

            <h2 id="project">Project</h2>
            <!-- TODO we have to analize the project -->

            <h2>Testing</h2> 
            

            <h2>Deployment</h2> 

            
            <h2>Maintenance</h2> 
            
            <!-- USEFUL
            <table style="width:100%" border="1">
            <tr>
            <td style="width:50%">
            </td>
            <td></td>
            </tr>
            </table>
            -->
                        
            <br><br> 	
        

            <p>My git repo: <a href="https://github.com/LeoManto/Mantovani_Leonardo">
                <k>https://github.com/LeoManto/Mantovani_Leonardo</k>
            </p>
            </a>
            <div style="background-color:rgba(86, 56, 253, 0.9); color:white">
                <p style="text-align: center;">By Leonardo Mantovani email: leonardo.mantovani2@studio.unibo.it</p>
                <center><img src="./img/foto.jpg" alt="teacher" width="15%" height="15%"></center>
            </div>
        </div>  
    </body>
</html>